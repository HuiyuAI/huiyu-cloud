<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.huiyu.service.core.mapper.PicExtMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="picExtMap" type="com.huiyu.service.core.entity.PicExt">
        <id column="id" property="id"/>
        <result column="pic_id" property="picId"/>
        <result column="views" property="views"/>
        <result column="enable" property="enable" jdbcType="INTEGER"/>
        <result column="path" property="path"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="is_delete" property="isDelete"/>
    </resultMap>

    <insert id="insert">
        insert into pic_e
            (pic_id, views, enable, path, create_time, update_time, is_delete)
        values (#{picExt.picId}, #{picExt.views}, #{picExt.enable}, #{picExt.path}, #{picExt.enable.createTime}, #{updateTime}, #{isDelete})
    </insert>

    <update id="update">
        update pic_e
        <set>
            <if test="picId != null and picId != ''">
                pic_id = #{picId},
            </if>
            <if test="views != null and views != ''">
                views = #{views},
            </if>
            <if test="enable != null">
                enable = #{enable},
            </if>
            <if test="path != null and path != ''">
                path = #{path},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime},
            </if>
        </set>
        where is_delete = 0
          and id = #{id};
    </update>

    <select id="getByPicId" resultMap="picExtMap">
        select *
        from pic_e
        where enable = 1
          and is_delete = 0
          and pic_id = #{picId};
    </select>

    <update id="deleteByPicId">
        update pic_e
        set is_delete = 1
        where pic_id = #{picId}
    </update>


</mapper>
